<div class="panel-row row-8 sponsor">
  <div class="container">
    <div class="field field-name-our-top-sponsors" style="padding-left:0px;padding-right:0px;">
      <section id="block-views-sponsor-slideshow-block-1"
        class="block block-views odd block-count-5 block-region--1 block-sponsor-slideshow-block-1">
        <p style="color:#002595; font-size:30px; font-family:'ITCKRIST';">Thank you to our
          sponsors</p>
        <!-- Slideshow container -->
        <div class="slideshow-container block-inner clearfix">

          <div class="mySlides fade">
            <div style="padding:10px 20px 50px 20px; ">

              <div class="star-container">
                <img class=" star star-rotate1" src="<?= ASSETS_URL ?>/images/gold star.png" />
                <h3 class='star-letter'>&nbsp;&nbsp;&nbsp;GOLD STAR
                  SPONSORS&nbsp;&nbsp;&nbsp;</h3>
                <img class=" star star-rotate2" src="<?= ASSETS_URL ?>/images/gold star.png" />
              </div>
              <div class="views-row views-row-1 views-row-odd views-row-first">
                <div class="views-field views-field-field-image">
                  <div class="field-content">
                    <a href="#" title="ACME Markets"><a href="#"><img class="image-style-sponsor-slideshow"
                          src="<?= ASSETS_URL ?>sites/default/files/styles/sponsor_slideshow/public/acme_foundation_logo_1.1.png?itok=i4nImmax"
                          width="165" height="100" alt /></a></a>
                  </div>
                </div>
              </div>
              <div class="views-row views-row-2 views-row-even">
                <div class="views-field views-field-field-image">
                  <div class="field-content">
                    <a href="#" title="ALDI"><a href="#"><img class="image-style-sponsor-slideshow"
                          src="<?= ASSETS_URL ?>sites/default/files/styles/sponsor_slideshow/public/aldi_homepage.png?itok=_ry0v6IW"
                          width="145" height="100" alt /></a></a>
                  </div>
                </div>
              </div>
              <div class="views-row views-row-7 views-row-odd">
                <div class="views-field views-field-field-image">
                  <div class="field-content">
                    <a href="#" title="Five Below"><a href="#"><img class="image-style-sponsor-slideshow"
                          src="<?= ASSETS_URL ?>sites/default/files/styles/sponsor_slideshow/public/FB_Logo-Transparent.png?itok=-cYvJir6"
                          width="145" height="100" alt /></a></a>
                  </div>
                </div>
              </div>
              <div class="views-row views-row-8 views-row-even">
                <div class="views-field views-field-field-image">
                  <div class="field-content">
                    <a href="#" title="Hy-Vee"><a href="#"><img class="image-style-sponsor-slideshow"
                          src="<?= ASSETS_URL ?>sites/default/files/styles/sponsor_slideshow/public/hyvee_home_slide.png?itok=fpQRF1qe"
                          width="145" height="100" alt /></a></a>
                  </div>
                </div>
              </div>


            </div>
          </div>

          <div class="mySlides fade">
            <div style="padding:10px 20px 50px 20px; ">
              <div class="star-container">
                <img class=" star star-rotate1" src="<?= ASSETS_URL ?>/images/silver star.png" />
                <h3 class='star-letter'>&nbsp;&nbsp;&nbsp;SILVER STAR
                  SPONSORS&nbsp;&nbsp;&nbsp;</h3>
                <img class=" star star-rotate2" src="<?= ASSETS_URL ?>/images/silver star.png" />
              </div>
              <div class="views-row views-row-3 views-row-odd">
                <div class="views-field views-field-field-image">
                  <div class="field-content">
                    <a href="#" title="Applebee&#039;s"><a href="#"><img class="image-style-sponsor-slideshow"
                          src="<?= ASSETS_URL ?>sites/default/files/styles/sponsor_slideshow/public/ab_hp_2.png?itok=u5CET4t4"
                          width="145" height="100" alt /></a></a>
                  </div>
                </div>
              </div>
              <div class="views-row views-row-4 views-row-even">
                <div class="views-field views-field-field-image">
                  <div class="field-content">
                    <a href="#" title="Auntie Anne&#039;s"><a href="#"><img class="image-style-sponsor-slideshow"
                          src="<?= ASSETS_URL ?>sites/default/files/styles/sponsor_slideshow/public/aa_hp_2.png?itok=BF8x8yub"
                          width="145" height="100" alt /></a></a>
                  </div>
                </div>
              </div>

              <div class="views-row views-row-9 views-row-odd">
                <div class="views-field views-field-field-image">
                  <div class="field-content">
                    <a href="#" title="Northwestern Mutual"><a href="#"><img class="image-style-sponsor-slideshow"
                          src="<?= ASSETS_URL ?>sites/default/files/styles/sponsor_slideshow/public/nm_logo_stack_blue_rgb_hp.png?itok=Tc-RGIpy"
                          width="145" height="28" alt /></a></a>
                  </div>
                </div>
              </div>
              <div class="views-row views-row-10 views-row-even">
                <div class="views-field views-field-field-image">
                  <div class="field-content">
                    <a href="#" title="Power Home Remodeling Group"><a href="#"><img
                          class="image-style-sponsor-slideshow"
                          src="<?= ASSETS_URL ?>sites/default/files/styles/sponsor_slideshow/public/power_home.png?itok=oNe7jsIe"
                          width="145" height="100" alt /></a></a>
                  </div>
                </div>
              </div>

            </div>
          </div>

          <div class="mySlides fade">
            <div style="padding:10px 20px 50px 20px; ">
              <div class="star-container">
                <img class=" star star-rotate1" src="<?= ASSETS_URL ?>/images/bronze star.png" />
                <h3 class='star-letter'>&nbsp;&nbsp;&nbsp;BRONZE STAR
                  SPONSORS&nbsp;&nbsp;&nbsp;</h3>
                <img class=" star star-rotate2" src="<?= ASSETS_URL ?>/images/bronze star.png" />
              </div>
              <div class="views-row views-row-5 views-row-odd">
                <div class="views-field views-field-field-image">
                  <div class="field-content">
                    <a href="#" title="Country Time"><a href="#"><img class="image-style-sponsor-slideshow"
                          src="<?= ASSETS_URL ?>sites/default/files/styles/sponsor_slideshow/public/country_time_home_slide.png?itok=w2bYRPP_"
                          width="150" height="100" alt /></a></a>
                  </div>
                </div>
              </div>
              <div class="views-row views-row-6 views-row-even">
                <div class="views-field views-field-field-image">
                  <div class="field-content">
                    <a href="#" title="Firebirds Wood Fired Grill"><a href="#"><img
                          class="image-style-sponsor-slideshow"
                          src="<?= ASSETS_URL ?>sites/default/files/styles/sponsor_slideshow/public/firebirds_home_slide.png?itok=8c1FeBif"
                          width="150" height="32" alt /></a></a>
                  </div>
                </div>
              </div>

              <div class="views-row views-row-11 views-row-odd">
                <div class="views-field views-field-field-image">
                  <div class="field-content">
                    <a href="#" title="Ritaâ€™s Italian Ice"><a href="#"><img class="image-style-sponsor-slideshow"
                          src="<?= ASSETS_URL ?>sites/default/files/styles/sponsor_slideshow/public/ritas.png?itok=qqetCLR8"
                          width="97" height="86" alt /></a></a>
                  </div>
                </div>
              </div>
              <div class="views-row views-row-12 views-row-even views-row-last">
                <div class="views-field views-field-field-image">
                  <div class="field-content">
                    <a href="#" title="Volvo - Founding Sponsor"><a href="#"><img class="image-style-sponsor-slideshow"
                          src="<?= ASSETS_URL ?>sites/default/files/styles/sponsor_slideshow/public/volvo_text_logo_home.png?itok=AmNVzrqh"
                          width="145" height="18" alt /></a></a>
                  </div>
                </div>
              </div>

            </div>
          </div>

        </div>

        <div style="text-align:center">
          <span class="dot" onclick="currentSlide(1)"></span>
          <span class="dot" onclick="currentSlide(2)"></span>
          <span class="dot" onclick="currentSlide(3)"></span>
        </div>

      </section>
    </div>
  </div>
</div>
<div class="region-alsf-bottom region-conditional-stack">
  <div class="container clearfix"></div>
</div>
</div>
</article>
</div>
</div>
</section>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer-wrapper">
  <div class="container clearfix">
    <footer id="footer" class="clearfix" role="contentinfo">
      <div class="region region-footer">
        <div class="region-inner clearfix">
          <div id="block-block-405"
            class="block block-block no-title odd first last block-count-18 block-region-footer block-405">
            <div class="block-inner clearfix">
              <div class="block-content content">
                <!-- <script
type="text/javascript"
src="https://a.optmnstr.com/app/js/api.min.js"
data-account="59221"
data-user="52641"
async
></script> -->
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="footer-signout" class="signOut clearfix">
        <p id="user-footer" class="fl"></p>
      </div>
      <p id="contact" style="display:flex;justify-content:center;width:100%;">
        <a href="<?= SITE_URL ?>contact">Contact Us</a>
      </p>
      <div id="footer-bottom">
        <p>
          <a href="<?= SITE_URL ?>products">Home</a> â€¢ <a href="<?= SITE_URL ?>products/privacy_policy">Privacy
            Policy</a> â€¢ <a href="<?= SITE_URL ?>products/terms_of_use">Terms of Use â€¢<a href="<?= SITE_URL ?>contact">
              Contact Us</a>
        </p>
        <p>

          Booktopia is a registered 501(c)(3) non-profit organization<br><br>

          Â© 2023 Booktopia<br />
          <!-- &ldquo;Booktopia&rdquo; is a registered service mark of Booktopia book group. -->
        </p>
      </div>
    </footer>
  </div>
</div>
</div>
<div id="messages-help-wrapper">
  <div class="container clearfix">
    <div id="messages"></div>
  </div>
</div>

<div id="myModal" class="modal donation-modal">
  <!-- Modal content -->
  <div class="modal-content">
    <!-- border:#437ed6 solid 3px; -->
    <div class="modal-header">
      <div class="form-line modal-img">
        <img src="<?= ASSETS_URL ?>sites/default/files/logo_tr1.png" alt="logo" />
      </div>
      <div class="" style="position: absolute;width: 35px;left: 7px;top: 12px;">
        <img id="donate_prev" src="<?= ASSETS_URL ?>images/prev.png" />
      </div>
      <div class="btn-close close">
        <img src="<?= ASSETS_URL ?>images/close.svg" />
      </div>
    </div>
    <div class="modal-body">
      <div id="donateSection">
        <form action="<?= BASE_URL . 'index.php/products/purchase'; ?>" method="POST" id="paymentFrm">
          <div>
            <!-- TODO: section1 -->
            <div class="modal-section1 form-container">

              <div class='modal-section-title'>Give the gift of reading</div>
              <div class="form-line">
                <div class="views-field form-text item-title">Donation Amount</div>
                <div class="views-field form-text item-content" id="amount">$50</div>
              </div>

              <div class="form-line">
                <div class="views-field form-text item-title" style="flex-grow:1;">Cover Fees</div>
                <!-- <a class="fee-edit">Please add $ to cover processing fees...</a> -->
                <div class="views-field form-text item-content" id="fee-amount">$0</div>
              </div>
              <div class="form-line-inner">
                <div class="views-field form-text item-title">
                  <input type="checkbox" class="view-field form-text " id="item-fee"></input>
                </div>
                <div class="views-field form-text item-content " id="fee-content"></div>
              </div>
              <div class="form-line total">
                <div class="views-field form-text item-title">Total Donation Amount</div>
                <div class="views-field form-text item-content" id="total-amount">$53.5</div>
                <input type="hidden" id="amounts" name="amounts" value="53.5" />
              </div>
              <div class='modal-section-title' style="margin-top:20px;">Pay it forward</div>
              <div class='gift-section'>
                <input type="checkbox" id="gift-checked"></input>
                <div class="views-field form-text item-content">
                  Would you like to make this donation a gift for someone?
                </div>
              </div>
              <div class="gift-part form-container">
                <div class="form-line">
                  <!-- <div class="views-field form-text">Recipients Name</div> -->
                  <div class="form-item my-text form-type-textfield form-item-search-block-form">
                    <input type="text" name="gift_name" id="gift_name" placeholder="Recipients Name"
                      class="form-text form-input" />
                  </div>
                </div>

                <div class="form-line">
                  <!-- <div class="views-field form-text">Recipients Email</div> -->
                  <div class="form-item my-text form-type-textfield form-item-search-block-form">
                    <input type="email" name="gift_email" id="gift_email" placeholder="Recipients Email"
                      class="form-text form-input" />
                  </div>
                </div>
                <div class="form-line">
                  <!-- <div class="views-field form-text">Message to Recipient</div> -->
                  <div class="form-item my-text  form-type-textfield form-item-search-block-form">
                    <Textarea name="gift_message" id="gift_message" placeholder="Message to Recipient"
                      class="form-text form-input" style="resize:none !important;"></Textarea>
                  </div>
                </div>
              </div>

            </div>
            <!-- TODO: section2 -->
            <div class="modal-section2 form-container">
              <div class='modal-section-title'>Personal Information</div>
              <div id="paymentResponse"></div>
              <div class="form-line">
                <div class="views-field form-text">First Name</div>
                <div class="form-item my-text form-type-textfield form-item-search-block-form">
                  <input type="text" id="first_name" name="first_name" placeholder="" class="form-text form-input"
                    required="" />
                </div>
              </div>
              <div class="form-line">
                <div class="views-field form-text">Last Name</div>
                <div class="form-item my-text form-type-textfield form-item-search-block-form">
                  <input type="text" name="last_name" id="last_name" placeholder="" class="form-text form-input"
                    required="" />
                </div>
              </div>
              <div class="form-line">
                <div class="views-field form-text">Email</div>
                <div class="form-item my-text form-type-textfield form-item-search-block-form">
                  <input type="email" name="email" id="email" placeholder="" class="form-text form-input" required="" />
                </div>
              </div>
              <!-- TODO: section3 -->

              <div class='modal-section-title' style="margin-top:10px;">Billing Information</div>
              <div class="form-line">
                <div class="views-field form-text">Address</div>
                <div class="form-item my-text form-type-textfield form-item-search-block-form">
                  <input type="text" name="address" id="address" placeholder="" class="form-text form-input"
                    required="" />
                </div>
              </div>
              <div class="form-line">
                <div class="views-field form-text">Address Line2</div>
                <div class="form-item my-text form-type-textfield form-item-search-block-form">
                  <input type="text" name="address_line2" id="address_line2" placeholder="" class="form-text form-input"
                    required="" />
                </div>
              </div>
              <div class="form-line">
                <!-- <div class="views-field form-text">City</div> -->
                <div class="form-item my-text form-type-textfield form-item-search-block-form">
                  <input type="text" name="city" id="city" placeholder="City" class="form-text form-input"
                    required="" />
                </div>
              </div>
              <div class="form-colum">
                <div class="form-line">
                  <div class="views-field form-text">State</div>
                  <div class="form-item my-text form-type-textfield form-item-search-block-form">
                    <input type="text" name="state" id="state" placeholder="" class="form-text form-input"
                      required="" />
                  </div>
                </div>
                <div class="form-line">
                  <div class="views-field form-text">Postal Code</div>
                  <div class="form-item my-text form-type-textfield form-item-search-block-form">
                    <input type="text" name="postal_code" id="postal_code" placeholder="" class="form-text form-input"
                      required="" />
                  </div>
                </div>
              </div>
              <div class="form-line">
                <div class="views-field form-text">Country</div>
                <div class="form-item my-text form-type-textfield form-item-search-block-form">
                  <input type="text" name="country" id="country" placeholder="" class="form-text form-input"
                    required="" />
                </div>
              </div>
              <div class='modal-section-title' style="margin-top:10px;">Card Information</div>
              <div class="form-group">
                <div class="views-field form-text" style="font-size:15px;">Card Number</div>
                <div id="card_number" class="form-field"></div>
              </div>
              <div class="form-colum">
                <div class="form-line">
                  <div class="form-group">
                    <div class="views-field form-text">Expiry Date</div>
                    <div id="card_expiry" class="form-field" style="width:100px;"></div>
                  </div>
                </div>
                <div class="form-line">
                  <div class="form-group">
                    <div class="views-field form-text">CVC Code</div>
                    <div id="card_cvc" class="form-field" style="width:100px;"></div>
                  </div>
                </div>
              </div>
            </div>
            <input type="hidden" id="kind" name="kind" value="0" />
            <div class="form-actions my-text form-wrapper" id="edit-actions">
              <button type="button" id="donate_next">Next</button>
              <!-- <button type="button" id="donate_prev">prev</button> -->
              <button type="submit" id="payBtn">Donate</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
</div>

<?php
if (isset($msg)) {
  echo '<script>alert("' . $msg . '")</script>';
}
?>
<!-- The Modal -->
<script>
// Get the modal
var modal = document.getElementById("myModal");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

function showModal() {
  modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
};

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
};
</script>
<script defer="defer" src="<?= ASSETS_URL ?>sites/default/files/google_tag/google_tag.script.js">
</script>
<script src="<?= ASSETS_URL ?>sites/all/modules/contrib/google_cse/google_cse.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/modules/custom/alsf_core/alsf_core.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/libraries/colorbox/jquery.colorbox-min.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/modules/contrib/colorbox/js/colorbox.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/modules/contrib/colorbox/styles/default/colorbox_style.js">
</script>
<script src="<?= ASSETS_URL ?>sites/all/modules/contrib/colorbox/js/colorbox_load.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/modules/contrib/colorbox/js/colorbox_inline.js"></script>
<script src="<?= ASSETS_URL ?>misc/tableheader.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/libraries/flexslider/jquery.flexslider-min.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/modules/contrib/flexslider_views_slideshow/js/flexslider_views_slideshow.js">
</script>
<!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDDoydmK_k0c7ZC5AvPsvyEMNk27qe35G0&amp;libraries=places">
</script> -->
<script src="<?= ASSETS_URL ?>sites/all/modules/custom/alsf_pfp/js/alsf_pfp.search.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/modules/contrib/responsive_menus/styles/meanMenu/jquery.meanmenu.js">
</script>
<script src="<?= ASSETS_URL ?>sites/all/modules/contrib/responsive_menus/styles/meanMenu/responsive_menus_mean_menu.js">
</script>
<script defer="defer" src="https://script.crazyegg.com/pages/scripts/0067/7431.js"></script>
<script src="<?= ASSETS_URL ?>misc/progress.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/modules/contrib/hide_submit/js/hide_submit.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/modules/contrib/colorbox_node/colorbox_node.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/libraries/superfish/sftouchscreen.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/libraries/superfish/jquery.hoverIntent.minified.js">
</script>
<script src="<?= ASSETS_URL ?>sites/all/libraries/superfish/supposition.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/libraries/superfish/superfish.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/modules/contrib/superfish/superfish.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/themes/alsf_adaptive/scripts/main.js"></script>
<script src="<?= ASSETS_URL ?>sites/all/themes/alsf_adaptive/scripts/responsive-tabs/js/jquery.responsiveTabs.min.js">
</script>
<script src="https://js.stripe.com/v3/"></script>
<!-- <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script> -->
<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initAutocomplete&libraries=places&v=weekly"
  defer></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
<link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet" />
<script type="text/javascript">
var $ = jQuery.noConflict();
var site_url = '<?= SITE_URL ?>';
var fee_checked = 1,
  gift_checked = 0;
var fee = 0;
var total_amount = 0;

// let regionNames = new Intl.DisplayNames(['en'], {
//   type: 'region'
// });
// regionNames.of('US'); // "United States"
// console.log('ddddddddddddddddddddddd', regionNames)

/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */
// This sample uses the Places Autocomplete widget to:
// 1. Help the user select a place
// 2. Retrieve the address components associated with that place
// 3. Populate the form fields with those address components.
// This sample requires the Places library, Maps JavaScript API.
// Include the libraries=places parameter when you first load the API.
// For example: <script
// src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">
let autocomplete;
let address1Field;
let address2Field;
let postalField;

function initAutocomplete() {
  address1Field = document.querySelector("#address1");
  address2Field = document.querySelector("#address_line21");
  postalField = document.querySelector("#postal_code");
  // Create the autocomplete object, restricting the search predictions to
  // addresses in the US and Canada.
  autocomplete = new google.maps.places.Autocomplete(address1Field, {
    componentRestrictions: {
      country: ["us", "ca"]
    },
    fields: ["address_components", "geometry"],
    types: ["address"],
  });
  ////////////////////////////////////////////////// address1Field.focus();
  // When the user selects an address from the drop-down, populate the
  // address fields in the form.
  autocomplete.addListener("place_changed", fillInAddress);
}

function fillInAddress() {
  // Get the place details from the autocomplete object.
  const place = autocomplete.getPlace();
  let address1 = "";
  let postcode = "";

  // Get each component of the address from the place details,
  // and then fill-in the corresponding field on the form.
  // place.address_components are google.maps.GeocoderAddressComponent objects
  // which are documented at http://goo.gle/3l5i5Mr
  for (const component of place.address_components) {
    // @ts-ignore remove once typings fixed
    const componentType = component.types[0];
    console.log(component);
    switch (componentType) {
      case "street_number": {
        address1 = `${component.long_name} ${address1}`;
        break;
      }

      case "route": {
        address1 += component.short_name;
        break;
      }

      case "postal_code": {
        postcode = `${component.long_name}${postcode}`;
        break;
      }

      case "postal_code_suffix": {
        postcode = `${postcode}-${component.long_name}`;
        break;
      }
      case "locality":
        document.querySelector("#location").value = component.long_name;
        break;
      case "administrative_area_level_1": {
        document.querySelector("#state").value = component.short_name;
        break;
      }
      case "country":
        document.querySelector("#country").value = component.long_name;
        break;
    }
  }

  address1Field.value = address1;
  postalField.value = postcode;
  // After filling the form with address components from the Autocomplete
  // prediction, set cursor focus on the second address line to encourage
  // entry of subpremise information such as apartment, unit, or floor number.
  address2Field.focus();
}

//window.initAutocomplete = initAutocomplete;



function isValidEmail(email) {
  const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
  return emailRegex.test(email);
}

$("#more-show").on('click', function() {
  if ($("#more-show-text").hasClass('detail-show'))
    $("#more-show-text").removeClass('detail-show');
  else
    $("#more-show-text").addClass('detail-show');
});
var clicked = false;
var box = "1";
$(".donate_btn").on('click', function() {
  if (box == $(this).attr("id")) {
    clicked = !clicked;
  } else clicked = true;
  box = $(this).attr("id");
  if (clicked)
    $("#pre-donate-input").val("$" + $(this).attr('amount'));
  else
    $("#pre-donate-input").val("");
});
$("#pre-donate").on('click', function() {
  if ($("#pre-donate-input").val() == 0 || $("#pre-donate-input").val() == "" || $("#pre-donate-input").val() ==
    '0') {
    alert("Please select box!");
    $("#pre-donate-input").focus();
    return;
  }
  modal.style.display = "block";
  $('#amount').text($("#pre-donate-input").val());
  $('#first_name').val("");
  $('#last_name').val("");
  $('#email').val("");
  $('#location').val("");
  $("#donate_prev").hide();
  $("#donate_next").show();
  $("#payBtn").hide();
  $(".modal-section1").show();
  $(".modal-section2").hide();
  total_amount = $("#pre-donate-input").val().replace("$", "") * 1;
  var fee1;
  fee = Math.floor((total_amount * 0.029 + 0.30) * 100 + 0.5) / 100;
  fee1 = fee;
  if (fee < 1) fee = fee.toString().replace("0.", ".");
  //$("#fee-content").html("Please add $" + fee.toFixed(2) + " to cover processing  associated with my donation.");
  $("#fee-content").html("Please add $" + fee1.toFixed(2).toString().replace("0.", ".") +
    " to cover the card processing fees associated with my donation.");
  $('#item-fee').attr('checked', true);
  $('#gift-checked').attr('checked', false);

  if ($('#item-fee').is(":checked")) {
    fee_checked = 1;
  } else fee_checked = 0;
  if ($('#gift-checked').is(":checked")) {
    gift_checked = 1;
  } else gift_checked = 0;

  total_amount = total_amount * 1 + fee * fee_checked;
  if (gift_checked == 1) $(".gift-part").show();
  else $(".gift-part").hide();
  $("#fee-amount").text("$" + fee1.toFixed(2));
  $("#kind").val(gift_checked);
  console.log(total_amount, fee, fee_checked);
  $("#total-amount").text("$" + total_amount.toFixed(2));
  $("#amounts").val(total_amount);
  $("#payBtn").html("Pay $" + total_amount.toFixed(2));
});
//$(".form-line-inner").hide();
var fee_show = false;
$(".fee-edit").click(function() {
  fee_show = !fee_show;
  if (fee_show) {
    $(".form-line-inner").show();
    //   $('.fee-edit').text("Done");
  } else {
    $(".form-line-inner").hide();
    //   $('.fee-edit').text("Edit");
  }
});
$("#item-fee").on('click', function() {
  fee_checked = 1 - fee_checked;
  $("#fee-amount").text("$" + (fee * fee_checked).toFixed(2));
  $("#total-amount").text("$" + ($("#pre-donate-input").val().replace("$", "") * 1 + fee * fee_checked).toFixed(2));
  $("#amounts").val((total_amount * 1 + fee * fee_checked).toFixed(2));
  $("#payBtn").html("Pay $" + $("#amounts").val().toFixed(2));
});
$("#gift-checked").on('click', function() {
  gift_checked = 1 - gift_checked;
  if (gift_checked == 1) $(".gift-part").show();
  else $(".gift-part").hide();
});

$(window).on("scroll touchmove", function() {
  $("#leaderboard-wrapper").toggleClass("tiny", $(document).scrollTop() > 60);
  $("#header").toggleClass("shrink", $(document).scrollTop() > 60);
});

$("#donate_next").on('click', function() {
  if (gift_checked == 1) {
    if ($("#gift_name").val() == "") {
      $("#gift_name").focus();
      return;
    }
    if (!isValidEmail($("#gift_email").val())) {
      $("#gift_email").focus();
      return;
    }
    if ($("#gift_message").val() == "") {
      $("#gift_message").focus();
      return;
    }
  }
  $("#donate_prev").show();
  $("#donate_next").hide();
  $("#payBtn").show();
  $(".modal-section1").hide();
  $(".modal-section2").show();
});

$("#donate_prev").on('click', function() {
  $("#donate_prev").hide();
  $("#donate_next").show();
  $("#payBtn").hide();
  $(".modal-section1").show();
  $(".modal-section2").hide();
});

var page = "<?= $statue ?>";
if (page == "schools" || page == "businesses" || page == "faq" || page == "contact" || page ==
  "privacy_policy" ||
  page == "terms_of_use") {
  $(".sponsor").addClass('sponsor-hide');
} else {
  $(".sponsor").removeClass('sponsor-hide');
}
if (page == "contact") {
  $("#contact").addClass('sponsor-hide');
} else {
  $("#contact").removeClass('sponsor-hide');
}

contact

let slideIndex = 1;
showSlides(slideIndex);

// Next/previous controls
function plusSlides(n) {
  showSlides(slideIndex += n);
}

// Thumbnail image controls
function currentSlide(n) {
  showSlides(slideIndex = n);
}
setInterval(() => {
  plusSlides(1);
}, 8000);

function showSlides(n) {
  let i;
  let slides = document.getElementsByClassName("mySlides");
  let dots = document.getElementsByClassName("dot");
  if (n > slides.length) {
    slideIndex = 1
  }
  if (n < 1) {
    slideIndex = slides.length
  }
  for (i = 0; i < slides.length; i++) {
    slides[i].style.display = "none";
  }
  for (i = 0; i < dots.length; i++) {
    dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex - 1].style.display = "block";
  dots[slideIndex - 1].className += " active";
}


var stripe = Stripe('<?php echo $this->config->item('stripe_publishable_key'); ?>');

// Create an instance of elements
var elements = stripe.elements();

var style = {
  base: {
    fontWeight: 400,
    fontFamily: 'Roboto, Open Sans, Segoe UI, sans-serif',
    fontSize: '16px',
    lineHeight: '1.4',
    color: '#555',
    backgroundColor: '#fff',
    '::placeholder': {
      color: '#888',
    },
  },
  invalid: {
    color: '#eb1c26',
  }
};

var cardElement = elements.create('cardNumber', {
  style: style
});
cardElement.mount('#card_number');

var exp = elements.create('cardExpiry', {
  'style': style
});
exp.mount('#card_expiry');

var cvc = elements.create('cardCvc', {
  'style': style
});
cvc.mount('#card_cvc');

// Validate input of the card elements
var resultContainer = document.getElementById('paymentResponse');
cardElement.addEventListener('change', function(event) {
  if (event.error) {
    resultContainer.innerHTML = '<p>' + event.error.message + '</p>';
  } else {
    resultContainer.innerHTML = '';
  }
});

// Get payment form element
var form = document.getElementById('paymentFrm');

// Create a token when the form is submitted.
form.addEventListener('submit', function(e) {
  e.preventDefault();
  createToken();
});

// Create single-use token to charge the user
function createToken() {
  stripe.createToken(cardElement).then(function(result) {
    if (result.error) {
      // Inform the user if there was an error
      resultContainer.innerHTML = '<p>' + result.error.message + '</p>';
    } else {
      // Send the token to your server
      stripeTokenHandler(result.token);
    }
  });
}

// Callback to handle the response from stripe
function stripeTokenHandler(token) {
  // Insert the token ID into the form so it gets submitted to the server
  if ($('#first_name').val() === "") {
    alert("Input First name!");
    $('#first_name').focus();
    return;
  }
  if ($('#last_name').val() === "") {
    alert("Input Last name!");
    $('#last_name').focus();
    return;
  }
  if (!isValidEmail($("#email").val())) {
    alert("Input your Email!");
    $('#email').focus();
    return;
  }
  if ($('#address').val() === "") {
    alert("Input Address!");
    $('#address').focus();
    return;
  }

  if ($('#city').val() === "") {
    alert("Input City!");
    $('#city').focus();
    return;
  }
  if ($('#state').val() === "") {
    alert("Input State!");
    $('#state').focus();
    return;
  }
  if ($('#postal_code').val() === "") {
    alert("Input Postal!");
    $('#postal_code').focus();
    return;
  }
  if ($('#country').val() === "") {
    alert("Input Country!");
    $('#country').focus();
    return;
  }
  // if ($('#card_number').val() === "") {
  //   alert("Input Card Number!");
  //   $('#card_number').focus();
  //   return;
  // }
  $("#amounts").val(total_amount);
  $("#kind").val(gift_checked);
  var hiddenInput = document.createElement('input');
  hiddenInput.setAttribute('type', 'hidden');
  hiddenInput.setAttribute('name', 'stripeToken');
  hiddenInput.setAttribute('value', token.id);
  form.appendChild(hiddenInput);

  form.submit();
}
</script>
</body>

</html>