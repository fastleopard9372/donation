(function($){$.fn.sftouchscreen=function(options){options=$.extend({mode:'inactive',breakpoint:768,breakpointUnit:'px',useragent:'',behaviour:2,disableHover:false},options);function activate(menu){var eventHandler=(('ontouchstart'in window)||(window.DocumentTouch&&document instanceof DocumentTouch))?['click touchstart','mouseup touchend']:['click','mouseup'];menu.find('li:has(ul)').children('a,span.nolink').each(function(){var item=$(this),parent=item.closest('li');if(options.disableHover){parent.unbind('mouseenter mouseleave');}
if(options.behaviour==2){if(parent.children('a.menuparent,span.nolink.menuparent').length>0&&parent.children('ul').children('.sf-clone-parent').length==0){var
cloneLink=parent.children('a.menuparent,span.nolink.menuparent').clone(),cloneLink=$('<li class="sf-clone-parent" />').html(cloneLink);cloneLink.find('.sf-sub-indicator').remove(),parent.children('ul').addClass('sf-has-clone-parent').prepend(cloneLink);}}
item.bind(eventHandler[0],function(event){if(item.hasClass('sf-clicked')){if(options.behaviour==0){window.location=item.attr('href');}
else if(options.behaviour==1||options.behaviour==2){event.preventDefault();item.removeClass('sf-clicked');parent.hideSuperfishUl().find('a,span.nolink').removeClass('sf-clicked');}}
else{event.preventDefault();item.addClass('sf-clicked');parent.showSuperfishUl().siblings('li:has(ul)').hideSuperfishUl().find('.sf-clicked').removeClass('sf-clicked');}});});$(document).bind(eventHandler[1],function(event){if(menu.not(event.target)&&menu.has(event.target).length===0){menu.find('.sf-clicked').removeClass('sf-clicked');menu.find('li:has(ul)').hideSuperfishUl();}});}
for(var b=0;b<this.length;b++){var menu=$(this).eq(b),mode=options.mode;if(mode=='always_active'){activate(menu);}
else if(mode=='window_width'){var breakpoint=(options.breakpointUnit=='em')?(options.breakpoint*parseFloat($('body').css('font-size'))):options.breakpoint,windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,timer;if((typeof Modernizr==='undefined'||typeof Modernizr.mq!=='function')&&windowWidth<breakpoint){activate(menu);}
else if(typeof Modernizr!=='undefined'&&typeof Modernizr.mq==='function'&&Modernizr.mq('(max-width:'+(breakpoint-1)+'px)')){activate(menu);}
$(window).resize(function(){clearTimeout(timer);timer=setTimeout(function(){var windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if((typeof Modernizr==='undefined'||typeof Modernizr.mq!=='function')&&windowWidth<breakpoint){activate(menu);}
else if(typeof Modernizr!=='undefined'&&typeof Modernizr.mq==='function'&&Modernizr.mq('(max-width:'+(breakpoint-1)+'px)')){activate(menu);}},50);});}
else if(mode=='useragent_custom'){if(options.useragent!=''){var ua=RegExp(options.useragent,'i');if(navigator.userAgent.match(ua)){activate(menu);}}}
else if(mode=='useragent_predefined'&&navigator.userAgent.match(/(android|bb\d+|meego)|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i)){activate(menu);}}
return this;}})(jQuery);